<!-- ✅ Bookmark UI Section -->

<button onclick="showBookmarkFolders()">📋 Bookmarked Songs</button>
<button id="bookmarkThisBtn" style="display: none;">⭐ Bookmark This Song</button>
<select id="favoriteSelect" style="display: none;">
  <option value="Favorites 1">Favorites 1</option>
  <option value="Favorites 2">Favorites 2</option>
  <option value="Favorites 3">Favorites 3</option>
  <option value="Favorites 4">Favorites 4</option>
  <option value="Favorites 5">Favorites 5</option>
</select>


<!-- ✅ Folder Container to hold Favorites 1-5 -->
<button id="toggleFoldersBtn">➖ Collapse Folders</button>
<div id="bookmarkedContainer" style="display: none; margin-top: 10px;"></div>


<!-- ✅ Bookmark Manager JS Setup -->
<script>
window.onload = async () => {
  loadBookmarks();           // ✅ initialize bookmarks
  showBookmarkFolders();     // ✅ render folders

  const songNames = await loadSongNames(); // ✅ Load song names into dropdown
  const select = document.getElementById("songSelect");
  loadLyricsForSelectedSong(select);       // ✅ Load lyrics
  select.addEventListener("change", () => loadLyricsForSelectedSong(select));

  // ✅ Show bookmark UI elements
  document.getElementById("bookmarkThisBtn").style.display = "inline-block";
  document.getElementById("favoriteSelect").style.display = "inline-block";

  // ✅ Handle bookmark button click
  document.getElementById("bookmarkThisBtn").onclick = () => {
    const selectedSong = select.value.trim();
    const folder = document.getElementById("favoriteSelect").value;
    if (selectedSong && folder) {
      setCurrentFolder(folder);
      bookmarkCurrentSong();
      alert(`⭐ '${selectedSong}' added to ${folder}`);
      document.getElementById("toggleFoldersBtn").onclick = toggleFolders;

    }
  };
};
</script>



<script>
    window.onload = async () => {
    const songNames = await loadSongNames(); // ✅ Load song names
    renderBookmarkFolders();                 // ✅ Show Favorites

    const select = document.getElementById("songSelect");
    loadLyricsForSelectedSong(select);       // ✅ Load lyrics for selected song
    select.addEventListener("change", () => {
  loadLyricsForSelectedSong(select);

  // ✅ Call this function to preload loop segments and show buttons
  const songName = select.value;
  onSongSelectionChange(songName);  // 🔁 Loads loop JSON + prepares segment buttons
});

   document.getElementById("bookmarkThisBtn").style.display = "inline-block";
document.getElementById("favoriteSelect").style.display = "inline-block";
document.getElementById("bookmarkThisBtn").onclick = () => {
  const selectedSong = select.value.trim();
  const folder = document.getElementById("favoriteSelect").value;
  if (selectedSong && folder) {
    setCurrentFolder(folder);             // ✅ Use defined global functions
    bookmarkCurrentSong();                // ✅ Safe call
    alert(`⭐ '${selectedSong}' added to ${folder}`);
  }
};
}; // ✅ close the async window.onload function
</script> <!-- ✅ ADD THIS to close the script properly -->
